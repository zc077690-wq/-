<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ÙƒØ§Ø´ÙŠØ± ÙÙ„Ø§ÙÙ„ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family: Tahoma;
    background:#f1f5f9;
}

.header{
    background:#15803d;
    color:white;
    text-align:center;
    padding:15px;
    font-size:22px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
    gap:10px;
    padding:10px;
}

.card{
    background:white;
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 0 6px #999;
    text-align:center;
    font-size:20px;
}

.emoji{
    font-size:50px;
    padding-top:10px;
}

.name{font-weight:bold;margin:5px 0}
.price{color:green;font-weight:bold}

.btn{
    width:100%;
    padding:8px;
    border:none;
    color:white;
    font-size:15px;
}

.b1{background:#2563eb}
.b2{background:#db2777}
.b3{background:#059669}
.b4{background:#ea580c}
.b5{background:#0284c7}
.b6{background:#f59e0b}

.cart{
    background:white;
    margin:10px;
    padding:10px;
    border-radius:10px;
}

.item{
    display:flex;
    justify-content:space-between;
    border-bottom:1px solid #ddd;
    padding:5px;
}

.total{
    font-size:20px;
    text-align:center;
    margin-top:10px;
}

.printBtn, .totalBtn, .clearBtn{
    background:#15803d;
    color:white;
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    margin-top:10px;
    font-size:18px;
}
</style>
</head>

<body>

<div class="header">ÙƒØ§Ø´ÙŠØ± ÙƒØ§ÙØªØ±ÙŠØ§ ÙÙ„Ø§ÙÙ„</div>

<div class="grid" id="products"></div>

<div class="cart">
<h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
<div id="cart"></div>
<div class="total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="total">0</span></div>

<button class="printBtn" onclick="printInvoice()">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
<button class="totalBtn" onclick="requestPassword()">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</button>
<button class="clearBtn" onclick="clearSales()">Ù…Ø³Ø­ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
</div>

<script>
let products=[
{name:"Ù„ÙØ© ÙÙ„Ø§ÙÙ„",price:500,emoji:"ğŸŒ¯",b:"b1"},
{name:"Ù„ÙØ© Ù…Ø´ÙƒÙ„",price:750,emoji:"ğŸ¥™",b:"b2"},
{name:"ÙˆØ¬Ø¨Ø© ÙÙ„Ø§ÙÙ„",price:1500,emoji:"ğŸŸ¤",b:"b3"},
{name:"Ø¨ÙŠØ¨Ø³ÙŠ",price:500,emoji:"ğŸ¥¤",b:"b4"},
{name:"Ù…Ø§Ø¡",price:250,emoji:"ğŸ’§",b:"b5"},
{name:"Ù„ÙØ© Ø¨Ø±ÙƒØ±",price:500,emoji:"ğŸ”",b:"b6"},
];

let cart=[]; // Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
let salesHistory=[]; // ÙƒÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function load(){
let p=document.getElementById("products");
p.innerHTML="";
products.forEach((x,i)=>{
p.innerHTML+=`
<div class="card">
<div class="emoji">${x.emoji}</div>
<div class="name">${x.name}</div>
<div class="price">${x.price}</div>
<button class="btn ${x.b}" onclick="add(${i})">Ø¥Ø¶Ø§ÙØ©</button>
</div>`;
});
}
load();

// Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù Ù„Ù„Ø³Ù„Ø©
function add(i){
cart.push(products[i]);
drawCart();
}

// Ø±Ø³Ù… Ø§Ù„Ø³Ù„Ø©
function drawCart(){
let c=document.getElementById("cart");
c.innerHTML="";
let t=0;
cart.forEach(x=>{
c.innerHTML+=`<div class="item"><span>${x.emoji} ${x.name}</span><span>${x.price}</span></div>`;
t+=x.price;
});
document.getElementById("total").innerText=t;
}

// Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function printInvoice(){
if(cart.length==0){alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª");return;}

let w=window.open("","_blank");
w.document.write(`
<html dir="rtl">
<head>
<title>ÙØ§ØªÙˆØ±Ø©</title>
<style>
body{font-family:Tahoma;text-align:center;}
h2{text-align:center}
table{width:100%;border-collapse:collapse;margin-top:20px}
td,th{border:1px solid #000;padding:5px;text-align:center}
</style>
</head>
<body onload="window.print()">
<h2>ÙØ§ØªÙˆØ±Ø© ÙƒØ§ÙØªØ±ÙŠØ§ ÙÙ„Ø§ÙÙ„</h2>
<table>
<tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ø³Ø¹Ø±</th></tr>
${cart.map(x=>`<tr><td>${x.emoji} ${x.name}</td><td>${x.price}</td></tr>`).join("")}
<tr><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th><th>${cart.reduce((a,b)=>a+b.price,0)}</th></tr>
</table>
<p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ… ğŸŒ¹</p>
</body>
</html>
`);
w.document.close();

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©
salesHistory.push(...cart);

// ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
cart=[];
drawCart();
}

// Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ÙÙ‚Ø· (Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ)
function clearCart(){
    cart=[];
    drawCart();
    document.getElementById("total").innerText = 0;
}

// Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¨Ø¯Ø¡ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯)
function clearSales(){
    if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ø§Ù‹ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ù„Ù„Ø¨Ø¯Ø¡ Ø¨ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ØŸ")){
        salesHistory = []; // ØªÙØ±ÙŠØº Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©
        clearCart(); // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        alert("ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø¨ÙŠØ¹Ø§ØªØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯.");
    }
}

// Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ Ø¨Ø±Ù…Ø²
function requestPassword(){
let pass = prompt("Ø§Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:");
if(pass === "20002000"){
showTotal();
}else{
alert("Ø±Ù…Ø² Ø®Ø§Ø·Ø¦! Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©.");
}
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©
function showTotal(){
if(salesHistory.length==0){alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†");return;}

let w=window.open("","_blank");
w.document.write(`
<html dir="rtl">
<head>
<title>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©</title>
<style>
body{font-family:Tahoma;text-align:center;}
h2{text-align:center}
table{width:100%;border-collapse:collapse;margin-top:20px}
td,th{border:1px solid #000;padding:5px;text-align:center}
</style>
</head>
<body>
<h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©</h2>
<table>
<tr><th>Ø§Ù„ØµÙ†Ù</th><th>Ø§Ù„Ø³Ø¹Ø±</th></tr>
${salesHistory.map(x=>`<tr><td>${x.emoji} ${x.name}</td><td>${x.price}</td></tr>`).join("")}
<tr><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</th><th>${salesHistory.reduce((a,b)=>a+b.price,0)}</th></tr>
</table>
</body>
</html>
`);
w.document.close();
}
</script>

</body>
</html>